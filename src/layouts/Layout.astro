---
import "../styles/globals.css";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import SEO from "../components/SEO.astro";
import { analytics as analyticsCfg } from "../config/site";

// Entry voor animaties (TS → JS bundel)
import revealEntry from "../scripts/reveal.entry.ts?url";

type LayoutProps = {
  title?: string;
  description?: string;
  ogImage?: string;
  canonical?: string;
};

const {
  title = "BJORNOS - House DJ",
  description = "Ik breng energie en flow naar elke set. Professionele House DJ voor clubs en festivals.",
  ogImage = "/og.svg",
  canonical
} = Astro.props as LayoutProps;
---

<html lang="nl" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- SEO -->
    <SEO
      title={title}
      description={description}
      ogImage={ogImage}
      canonical={canonical}
    />

    <!-- Google Analytics 4 -->
    {analyticsCfg.gaMeasurementId && (
      <>
        <script
          async
          src={`https://www.googletagmanager.com/gtag/js?id=${analyticsCfg.gaMeasurementId}`}
        ></script>

        <script is:inline define:vars={{ gaId: analyticsCfg.gaMeasurementId }}>
          window.dataLayer = window.dataLayer || [];
          function gtag(){ dataLayer.push(arguments); }
          gtag('js', new Date());
          gtag('config', gaId, { send_page_view: true });
        </script>
      </>
    )}

    <!-- Favicon -->
    <link rel="icon" href="/favicon.svg" />
  </head>

  <body>
    <Navbar />

    <main id="main" class="container-px">
      <slot />
    </main>

    <Footer />

    <!-- Reveal animations (TS → JS bundel) -->
    <script type="module" src={revealEntry}></script>
  </body>
</html>
